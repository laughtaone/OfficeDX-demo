# Offfice-DX デモ用リポジトリ
当リポジトリは、2024年4月~10月頃にかけて開発した事務DX支援システムを、デモンストレーション(デモ)用に書き換えたものです。

開発に使用したFirebaseのAPIキーや必要なファイルは、当リポジトリには含まれていません。

デモ用にFirebaseの処理を行わないよう、改変しています。


## 概要

本システムは、本校の情報システム工学コースにおける、2024年度 エンジニアリングデザインIの授業内の1グループで計画・開発した事務DX支援システムです（実際に導入されたわけではありません）。

## 背景

本校の窓口業務が事務の職員の方々で負担になっています。ヒアリングによると、特に負担になっているのが、学生からの書類申請と質問対応です。

現在、学生から事務室への各申請に必要な書類は窓口前のボックスからもらわなければならず、学校に行かないと入手できないといった問題があります。また、窓口では何度も同じ質問が寄せられたり、質問への対応を知っている職員がいない時に回答できないといったことがあり、質問においても効率的でない部分があります。

## 目的

窓口業務の一部を電子化することで、事務室の職員の方々の業務を軽減させることを目的としています。また、学生がより快適に学生生活を送れるよう支えることを目的としています。

## 対象

- 事務室の職員の方々
- 窓口を利用する学生

## 開発人数

開発人数は5人です。

## 機能

### 書類

窓口前でもらわなければならなかった書類のPDFデータを閲覧・ダウンロードすることができます。
トップ画面の下部メニューの左側の項目を押すと、現在入手可能な申請書類一覧が表示されます。
各書類を押すとその書類のPDFファイルのページに遷移します。

### Q&A

Q&A一覧・検索では、管理者が投稿したQ&A情報を閲覧・検索することができます。
トップ画面の下部メニューの右側の項目を押すと、事務室に寄せられるQ&A一覧が表示されます。
各Q&Aを押すとそのQ&Aの詳細ページに遷移します

### 検索

トップ画面に表示される検索ボックスにテキストを入れ、検索を実行すると、該当する書類・Q&Aが表示されます。

### チャット

簡易的なチャット機能を通して、書類やQ&A情報を探すことができます。
トップ画面の右下に表示されているチャットボタンを押すとチャット画面が表示され、プロンプトに合う書類・Q&Aが表示されます。
不適切な言葉を含むプロンプトは実行されず、遊び心のあるプロンプトには少し工夫のある応答します。

| プロンプトの状況 | 応答 | プロンプトの例 |
| -- | -- | -- |
| ユーザーが情報を探している | 検索結果を表示 | ー |
| ユーザーが単なる会話をしていると判断された | わからないと伝える | 「すごい！」|
| 不適切な言葉が含まれている場合 | 警告 | ー |
| 質問意図がないと判断された場合 | 警告 | プロンプトの文字数が1文字 |
| ユーザーが会話を終了したいと判断された場合 | チャット終了を提案 | 「さようなら」 |
| ユーザーが暇そうな場合 | ミニゲームを提案 | 「暇です」 |

### 管理者

書類・Q&Aは、管理者のみが管理者専用ページから追加・変更・削除することができます。
トップ画面のサイドバーに表示されている管理者ログインページを押すと管理者ページが表示され、このページから、書類ページ・Q&Aページに掲載するものを、追加・編集・削除の操作で管理することができます。
このページにアクセスするにはログインが必要となり、学生はアクセスできません。

### ミニゲーム

チャット画面から、暇やゲームを連想するプロンプトを送ると、ミニゲーム画面への案内が表示され、このページのみから、ミニゲームのページにアクセスできます。
例えば「暇」や「ゲーム」と送るとアクセスできます。
このミニゲームは次々に表示されるいくつかのテキストから「産技高専」or「TMCIT」を探し、見つけた個数をスコアとして競うミニゲームです。
これは、あくまでユーモアとしてのおまけ機能です。



## 開発手順
1. アイデアをいただき、内容を練る
2. 事務室の職員の方にヒアリングを実施し、事務室における課題を発見する
3. "その課題をDX化によって解決するアプリ"としてアイデアを膨らませ、設計書やUI案を作る
4. 開発を進める

## ワイヤーフレーム

Figmaを用いて、ワイヤーフレームを作成した。事務室から肯定的なフィードバックをもらいました。

## アーキテクチャ

- 全体
    - 開発言語/フレームワーク：Dart/Flutter
    - 利用想定環境：Web
        - Flutterで開発するため、横断的にビルド可能
        - Webに加え、iOS向けにもビルドできるよう開発を進めた
- 書類・Q&A管理
    - 書類ファイル単体の保管には、Firebase Storageを利用
    - 書類情報・Q&A情報の保管には、Firebase Cloud Firestoreを利用
- 管理者認証
    - 管理者の認証には、Firebase Authenticationを利用

## 類似システム

- [Zendeskで顧客視点のサポート体制を構築](https://www.zendesk.co.jp/lp/brand/?utm_source=google&utm_medium=Search-Paid&utm_network=g&utm_campaign=SE_AW_AP_JP_JP_N_Sup_Brand_TM_Alpha_D_H&matchtype=e&utm_term=zendesk&utm_content=659834939736&theme=&gad_source=1&gclid=CjwKCAjw57exBhAsEiwAaIxaZlKymrt7soh9BDPjcPJuVK5XyV25WkM-V4mNuuBmEFRHq6riuwBKpxoCQ9EQAvD_BwE&demoStep=personal)

    - Zendesk。社内Q&Aを作成可能。AIチャットbotを搭載しています。

- [AI搭載のFAQシステムsAI Search（サイサーチ）は検索せずに回答が見つかる](https://saichat.jp/saisearch/)

    - sAI Search。上に同じ。寄せられそうな質問を予測する機能を搭載しています。

- [入社手続き・雇用契約｜SmartHR｜シェアNo.1のクラウド人事労務ソフト](https://smarthr.jp/function/agreement/?utm_source=google&utm_medium=cpc&utm_campaign=search-06-other&utm_term=c-%E6%9B%B8%E9%A1%9E%20%E4%BD%9C%E6%88%90-b&utm_content=125462199357-582736296909&gad_source=1&gclid=CjwKCAjw57exBhAsEiwAaIxaZk3OJ_YEFJP5pPM7-0BtllZifomiBkYMGI4XkqjmTCngPyaMrkvPVBoCA7AQAvD_BwE)

    - SmartHR。現在使われている紙面と同じ書類を電子的に作成できます。


## 当リポジトリについて

当リポジトリを複製し、ご自身のFlutter環境でそのまま実行しようとしても、FirebaseのAPIキーが入った.envファイルや必要なファイルが存在しないため、実行できません。そのため、あくまでコードの閲覧として当リポジトリをご利用ください。

## 開発開始当初のREADME.md
開発を始めた2024年4月時点でのREADME.mdは、次の通りです。

<details>
  <summary>このトグルを開くとご覧いただけます</summary>

  ## 概要

窓口業務のうち、学生からの書類申請と質問対応の業務を電子化したポータルサイト。

## 背景

窓口業務が事務の職員の方々で負担になっている。特に負担になっているのが、学生からの書類申請と質問対応だ。

現在、書類の申請は事務側で紙の書類を校内支援システムに入力している。しかし、学生から事務室への申請は、未だに紙のままである。誤字脱字や書類不備が発生し、時間がかかっている。書類内容の打ち込みも負担となっている。

また、学生からの質問対応も電子化への要望が高い。何度も同じ質問が寄せられたり、質問への対応を知っている職員がいない時に回答できないといったことがあるからだ。

## 目的

窓口業務の一部を電子化することで、事務室の職員の方々の業務を軽減させる。また、学生がいつでもどこでも窓口機能を使えるようにする。

## 対象

- 事務室の職員の方々
- 窓口を利用する学生

## 機能

申請画面では、窓口前でもらわなければならなかった書類のPDFデータをダウンロード可能である。

Q&A一覧・検索では、過去に寄せられた質問を検索でき、見つからない場合はフォームを通じて質問できる。

ChatGPTで検索アシストを行う。

News欄では、必要な書類や奨学金などのイベントが提示される。

校内の道案内では、研究室やゼミナール室の場所や、各授業が開催されている部屋を案内する。

また、OPACへのアクセスも提供される。

優先して実装するのは、「書類申請」「Q&A」である。この二つが事務室から最も求められている機能であるからだ。


## ワイヤーフレーム

Figmaを用いて、ワイヤーフレームを作成した。事務室から肯定的なフィードバックをもらった。

## アーキテクチャ

- 全体
    - Flutterを使って実装する
    - AndroidとiOS向けのネイティブかWeb向けにビルドする
        - Flutterで開発するため、横断的にビルド可能
- 書類申請
    - 申請書類をmicroCMSを利用して設定
- Q&A
    - microCMSを使用して、Q&Aデータベースを構築
    - ユーザーが質問を投稿し、管理者が回答を追加する仕組み
        - Formに質問を記入
        - 質問に対する回答を、事務室側がメールで送信。また、回答データをデータベースに追加
- 検索アシスト
    - GPTが検索をアシストする

## 類似システム

[Zendeskで顧客視点のサポート体制を構築](https://www.zendesk.co.jp/lp/brand/?utm_source=google&utm_medium=Search-Paid&utm_network=g&utm_campaign=SE_AW_AP_JP_JP_N_Sup_Brand_TM_Alpha_D_H&matchtype=e&utm_term=zendesk&utm_content=659834939736&theme=&gad_source=1&gclid=CjwKCAjw57exBhAsEiwAaIxaZlKymrt7soh9BDPjcPJuVK5XyV25WkM-V4mNuuBmEFRHq6riuwBKpxoCQ9EQAvD_BwE&demoStep=personal)

Zendesk。社内Q&Aを作成可能。AIチャットbotを搭載している。

[AI搭載のFAQシステムsAI Search（サイサーチ）は検索せずに回答が見つかる](https://saichat.jp/saisearch/)

sAI Search。上に同じ。寄せられそうな質問を予測する機能を搭載している。

[入社手続き・雇用契約｜SmartHR｜シェアNo.1のクラウド人事労務ソフト](https://smarthr.jp/function/agreement/?utm_source=google&utm_medium=cpc&utm_campaign=search-06-other&utm_term=c-%E6%9B%B8%E9%A1%9E%20%E4%BD%9C%E6%88%90-b&utm_content=125462199357-582736296909&gad_source=1&gclid=CjwKCAjw57exBhAsEiwAaIxaZk3OJ_YEFJP5pPM7-0BtllZifomiBkYMGI4XkqjmTCngPyaMrkvPVBoCA7AQAvD_BwE)

SmartHR。現在使われている紙面と同じ書類を電子的に作成できる。

## 実装計画

### 実装の優先度

1. PDF書類のダウンロード
2. Q&A
3. 書類申請用Form
4. （News欄、校内地図）

### 前半(3週間程度)

1. Figmaで画面イメージを作成
2. FlutterのCI/CD環境を構築
    
    [Continuous delivery with Flutter](https://docs.flutter.dev/deployment/cd#fastlane)
    
3. ダミーデータを使ってUI部分を作り、使用感を確認
4. 事務室の方からUI部分のフィードバックをもらう
5. フィードバックを受け、改良

### 後半(3週間程度)

1. UI部分をリファクタリング
2. ウィジェットのテストを作成
3. データベースの構造を定める
4. バックエンドの処理を作成
5. 事務室の方から全体的なフィードバックをもらう
6. フィードバックを受け、改良

## 参考

[コンテンツに自動付与される値｜microCMSドキュメント](https://document.microcms.io/manual/automatic-grant-fields)

[microCMSに大量コンテンツを登録する方法まとめ](https://blog.microcms.io/how-to-register-a-large-amount-of-content/)

[Flutter アプリのテスト方法  |  Google Codelabs](https://codelabs.developers.google.com/codelabs/flutter-app-testing?hl=ja#0)
</details>
